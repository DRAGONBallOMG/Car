<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Fullscreen Camera</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
  overflow: hidden;
  touch-action: manipulation;
}

video {
  display: none;
}

canvas {
  width: 100vw;
  height: 100vh;
  display: none;
  object-fit: cover;
}
</style>
</head>

<body>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
let captured = false;

// เปิดกล้อง
navigator.mediaDevices.getUserMedia({
  video: { facingMode: "user" }, // เปลี่ยนเป็น "environment" ถ้าจะใช้กล้องหลัง
  audio: false
}).then(stream => {
  video.srcObject = stream;
});

// ขอ Fullscreen (ต้องเกิดจากการแตะ)
function goFullscreen() {
  if (document.fullscreenElement) return;
  document.documentElement.requestFullscreen().catch(()=>{});
}

// แตะหน้าจอ
document.body.addEventListener("click", () => {
  goFullscreen();

  if (captured) return;

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  ctx.drawImage(video, 0, 0);

  canvas.style.display = "block";
  captured = true;
});
</script>

</body>
</html>